# MongoDB



### NoSQL의 일반적인 특징

질의 명령어가 SQL이 아니다

정보의 형식을 미리 정하지 않는다



NoSQL DBMS : Not Only SQL Database Management System

전통적인 관계형 DB보다** 덜 제한적인 일관성 모델**을 제공하는 DB + 데이터를 **저장 및 관리하는 시스템**



대표적 RDBMS 제작시기

MySQL(1995), PostgreSQL(1996), Oracle DB(1979)



대표적 NoSQL DB 제작시기

MongoDB(2009) -  일반적 활용

ElasticSearch(2010) - 전문 검색 특화

Redis(2009) - 캐싱 특화



스마트폰 등장, 인터넷의 확산과 맞물려서 데이터 처리량이 빠르게 증가



전통적 RDBMS의 규칙

ACID 원칙 준수, 2차원 테이블 형태, SQL 통한 질의



정보 처리량 늘리려면 규칙을 깨야한다고 판단함

<mark>기존 RDBMS는 안정성에 중점을 둔 반면, NoSQL은 유연성 확장성과 성능 최적화에 특화</mark>



**정리**

NoSQL은 RDBMS보다 <mark>덜 제한적인 일관성 모델을 제공</mark>

기존 RDBMS가 일관성 모델 때문에 가질 수 없던 <mark>확장성, 유연성, 고성능, 고기능성</mark>을 확보



**<mark>MongoDB는 현대적 설계로 고성능을 내면서 동시에 많은 기능과 안정화 된 다목적DB</mark>**



과거에 하나의 DBMS로 처리하는 상황이 빈번했습니다

**기존 RDBMS**는 하나의 인스턴스에서 작동하는 것이 **기본값**

현대에는 처리할 데이터량이 많아서 분산 컴퓨팅이 빈번합니다

**현대적 DBMS**는 분산 컴퓨팅을 하는 것이 **기본값**



#### MongoDB에서 지원하는 분산 컴퓨팅은?

- 복제

복사하여 저장하는 방식

<mark>**안정성**을 높이기 위한 방식</mark>, 원본 서버가 망가져도 정상 서비스 가능



- 샤딩

나누어 저장하는 방식

<mark>**성능**을 향상하기 위한 방식</mark>, 읽기, 쓰기 성능 향상 가능



#### 분산 컴퓨팅 관련 MongoDB 주의점은?

Q. 단일 인스턴스 DBMS에서 쓰기 작업 도중 서버가 꺼지면?

MongoDB -> 의도치 않게 중간 상태로 데이터가 저장될 수도 있음(May)

MySQL -> 항상 저장완료 또는 저장 실패 상태로만 존재



MongoDB는 분산 컴퓨팅 하는 것을 가정하고 쓰기 기본 설정이 되어 있습니다

<mark>Write-Concern, Read-Concern 설정</mark> 해야 안정성을 높여줄 수 있습니다



### JS 친화적인 MongoDB

##### 고급 기능 내장의 문제점

분산 컴퓨팅 기본값 설정의 문제점 - 입문이 어려움

V8엔진의 성능 향상으로 웹 개발자의 대규모 업종 전환과 맞물려서 MongoDB는 SQL을 몰라도 개발 가능한 <mark>V8 엔진의 JS기반 쉬운 DBMS를 표방</mark> 합니다



MySQL 이 SQL을 활용한다면 MongoDB는 JS를 활용하는 것입니다

**또한, JSON과 유사한 BSON 구조로 정보를 저장합니다**



**정리**

쉬운 입문, BSON 자료형 사용, 내부 명령어를 JS형식으로 사용

MongoDB내부는 C로 만들었지만 사용자 인터페이스 되는 부분은 JS로 만들었습니다



### MongoDB 활용

범용적인 DBMS로 활용이 용이하지만 일반적인 상황에서 활용하기에는 무리가 있습니다

RDB들은 25년간 유지보수된 기술, 다양한 개발자와 관련문서가 존재하지만 MongoDB는 개발된 지 10년된 기술이라 이제 어느 정도 안정성이 갖춰졌다고는 해도 RDB 만큼은 아니라고 봐야 합니다



MongoDB의 장점

1. JS에 친화적

2. 성능 확장이 쉽다

3. 높은 성능을 낼 수 있다

4. 유연한 구조로 저장할 수 있다 - BSON구조를 활용하여

5. 다양한 자료형을 지원한다 - 



Mongo 활용 

JS 기반 프로젝트

- 프로젝트 언어를 JS로 통일시키고자 할 때 정보 변환 없이 전달가능하여 활용하기 좋습니다

- 기존의 JSON 방식 DB에서 더 많은 기능과 성능이 필요할 때



저장할 정보의 형태가 자주 변경되는 경우

- 파일럿 프로젝트
  
  - 앞으로 몇 명이 이용할지 예측이 안 되는 프로젝트
  
  - 한참 개발 중이고 상황에 따라 데이터 구조가 쉽게 바뀔 수 있는 신규 프로젝트

-  비 정형화된 정보를 전산화
  
  - 각종 예외상황이 적혀있는 수기로 작성된 과거의 주문 정보
  
  - 로그 데이터 형식의 정보를 저장할 때
  
  - 정보를 정형화 하기 어려운 경우

안정성보다 높은 성능이 필요한 경우

- NoSQL이 기존 DBMS보다 수십배는 더 높은 성능으 가지므로 안정성보다 높은 성능이 필요할 때 
  
  - Ex) 카카오 모빌리티의 지도정보, SNS 정보 저장



## 활용하면 안 되는 경우는?

##### 높은 성능보다 안전성, 무결성이 중요한 경우

- 결제 시스템, 예약 시스템, 데이터 무결성이 중요한 경우

##### 복잡한 쿼리가 빈번한 경우

- JOIN, UNION과 같은 연산을 처리할 때 좀 더 복잡해집니다 RDB와 비교했을 때 없는 함수가 꽤 있습니다


